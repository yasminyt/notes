## å¯¹è±¡æ–¹æ³•ä¸­çš„ this
+ ä¸ºäº†åœ¨å¯¹è±¡å†…æŸä¸ªå±žæ€§å¯ä»¥è®¿é—®å¯¹è±¡çš„å…¶å®ƒå±žæ€§ï¼Œä¸€èˆ¬ä½¿ç”¨**this**å…³é”®å­—æ¥æŒ‡å‘å¯¹è±¡æœ¬èº«
+ this é€šå¸¸ç”¨åœ¨æ–¹æ³•ä¸­æ¥æŒ‡ä»£è°ƒç”¨æ–¹æ³•çš„ ç‚¹ ä¹‹å‰çš„å¯¹è±¡
  ```javascript
  let user = {
    name: 'John',
    age: 30,

    sayHi() {
      alert(this.name)
    }
  }

  user.sayHi()  // John
  ```
  + åœ¨ä¸Šè¿°ä»£ç  `user.sayHi()` çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œ`this` æŒ‡ä»£çš„å°±æ˜¯ `user`
  + å½“ç„¶ä¹Ÿå¯ä»¥åœ¨ä¸ä½¿ç”¨ this çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å¤–éƒ¨å˜é‡åæ¥å¼•ç”¨å®ƒï¼Œä¾‹å¦‚ï¼š
    ```javascript
    let user = {
      name: 'John',
      age: 30,

      sayHi() {
        alert(user.name)  // ç›´æŽ¥ä½¿ç”¨ user æ¥ä»£æ›¿ this
      }
    }
    ```
  + ä½†è¿™æ ·çš„ä»£ç æ˜¯ä¸å¯é çš„ï¼Œå¦‚æžœå°† user å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œå¹¶å¯¹ user é‡æ–°èµ‹å€¼ï¼Œé‚£ä¹ˆå¯¹äºŽæ–°å˜é‡æ¥è¯´å°±ä¼šè®¿é—®åˆ°é”™è¯¯çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼š
    ```javascript
    // åœ¨ä¸Šé¢ä»£ç åŸºç¡€ä¸Šï¼Œæ·»åŠ ï¼š
    let admin = user;
    user = null  // user çš„å€¼å·²ç»è¢«æ”¹å˜

    admin.sayHi()   // Errorï¼ç”±äºŽ user çš„å€¼å·²ç»è¢«æ”¹å˜ï¼Œæ‰€ä»¥å†é€šè¿‡ user.name æ¥è®¿é—®å¯¹è±¡çš„ name å±žæ€§æ˜¯ä¸å¯¹çš„
    ```
  + æ‰€ä»¥åªæœ‰ä½¿ç”¨ this æ¥æŒ‡å‘å¯¹å¯¹è±¡çš„å…·ä½“å¼•ç”¨ï¼Œæ‰èƒ½é¿å…ä¸Šè¿°æ‰€è¯´çš„æƒ…å†µï¼Œthis å§‹ç»ˆæŒ‡å‘å½“å‰çš„å¯¹è±¡å¼•ç”¨ï¼ˆç‚¹å·ä¹‹å‰çš„å˜é‡ï¼‰

## this ä¸å—é™åˆ¶
+ this å¯ä»¥ç”¨äºŽä»»ä½•å‡½æ•°ä¸­
+ this æ˜¯åœ¨**è¿è¡Œæ—¶**æ±‚å€¼çš„ï¼Œå¯ä»¥æ˜¯ä»»ä½•å€¼ï¼Œä¾‹å¦‚ï¼Œä»Žä¸åŒçš„å¯¹è±¡ä¸­è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°å¯èƒ½ä¼šæœ‰ä¸åŒçš„ this å€¼
  ```javascript
  let user = { name: 'John' }
  let admin = { name: 'Admin' }

  function sayHi() {
    alert(this.name)
  }

  // åœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å‡½æ•°
  user.f = sayHi
  admin.f = sayHi

  /** ä¸¤ä¸ªå¯¹è±¡åœ¨å¯¹å‡½æ•°è¿›è¡Œè°ƒç”¨æ—¶ï¼Œthis æœ‰ä¸åŒçš„å€¼
   *  å‡½æ•°å†…éƒ¨çš„ this å§‹ç»ˆæŒ‡å‘å¼•ç”¨æ—¶ ç‚¹å· ä¹‹å‰çš„å¯¹è±¡
   */
   user.f()   // John (this == user)
   admin.f()  // Admin (this == admin)

   admin['f'] // Adminï¼ˆä¸ç®¡ä½¿ç”¨ç‚¹å·è¿˜æ˜¯æ–¹æ‹¬å·éƒ½æ²¡æœ‰å…³ç³»ï¼‰
  ```
+ å®žé™…ä¸Šä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰å¯¹è±¡è°ƒç”¨æ—¶ï¼Œå¯¹å‡½æ•°å†…éƒ¨ä½¿ç”¨ this
  ```javascript
  function sayHi() {
    alert(this)
  }

  sayHi()   // undefined
  ```
  + åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¯¥å‡½æ•°ä¸­çš„ this ä¸º undefinedï¼Œè¡¨ç¤ºæ²¡æœ‰ä»»ä½•å¯¹è±¡æ¥è°ƒç”¨è¯¥å‡½æ•°
  + ä½†æ˜¯åœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthis è¡¨ç¤ºçš„æ˜¯å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­çš„windowï¼‰
  + *æ‰€ä»¥ï¼šé€šå¸¸åœ¨æ²¡æœ‰å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œå‡½æ•°å†…ä¸€èˆ¬ä¸ä½¿ç”¨ thisï¼›å¦‚æžœå‡½æ•°å†…æœ‰ thisï¼Œé‚£ä¹ˆé€šå¸¸æ„å‘³ç€å‡½æ•°æ˜¯åœ¨å¯¹è±¡ä¸Šä¸‹æ–‡çŽ¯å¢ƒä¸­è¢«è°ƒç”¨çš„*

### å¤æ‚çš„æ–¹æ³•è°ƒç”¨å¯èƒ½ä¼šå¤±åŽ» this
```javascript
let user  = {
  name: 'John',
  hi()  { alert(this.name) },
  bye() { alert('Bye') }
}

user.hi();   // John

// çŽ°åœ¨æ ¹æ® name å±žæ€§æ¥å†³å®šè°ƒç”¨ user.hi è¿˜æ˜¯ user.bye
(user.name === 'John' ? user.hi : user.bye)()   // Error!
```
+ åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæœ€åŽä¸€è¡Œçš„ä¸‰å…ƒè¿ç®—ç¬¦çš„ç»“æžœæ˜¯ user.hiï¼Œè¯¥æ–¹æ³•ä¼šç«‹åˆ»è¢«ç¬¬äºŒä¸ª () è°ƒç”¨ï¼Œä½†æ˜¯å‘ç”Ÿäº†é”™è¯¯ï¼ˆè¿™æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹çš„ç»“æžœï¼Œå¦‚æžœè¯´æ˜¯éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthis æŒ‡å‘çš„æ˜¯ window å¯¹è±¡ï¼Œä½†æ˜¯ç»“æžœä¹Ÿä¸ä¼šæ˜¯ç¨‹åºé¢„æœŸçš„ç»“æžœï¼‰
+ è¿™é‡Œéœ€è¦äº†è§£ `obj.method()` è°ƒç”¨çš„åŽŸç†ï¼Œ`obj.method()` ä¸­æœ‰ä¸¤ä¸ªæ“ä½œç¬¦ï¼š
  1. é¦–å…ˆï¼Œç‚¹å· `.` å–å¾—è¿™ä¸ª `obj.method` å±žæ€§
  2. å…¶åŽçš„æ‹¬å· `()` è°ƒç”¨å®ƒ
  + å¦‚æžœæŠŠè¿™äº›æ“ä½œåˆ†ç¦»å¼€ï¼Œé‚£ä¹ˆå®šä¹‰åœ¨ method ä¸­çš„ this å°±ä¼šä¸¢å¤±
    ```javascript
    // å°†èµ‹å€¼ä¸Žæ–¹æ³•å®šä¹‰æ‹†åˆ†ä¸ºä¸¤è¡Œ
    let hi = user.hi
    hi()   // Error! this æœªå®šä¹‰ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰
    ```
  + ä¸ºäº†ä½¿å¯¹è±¡ä¸­çš„ method èµ·ä½œç”¨ï¼Œ*ç‚¹å· `.` è¿”å›žçš„ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯å¼•ç”¨ç±»åž‹çš„å€¼*ï¼ˆè¿™é‡Œä¸å¤§ç†è§£å•¥æ„æ€ðŸ¤¦â€ï¼‰
  + å¼•ç”¨ç±»åž‹çš„å€¼ç”±ä¸‰ä¸ªå€¼ç»„æˆï¼š`(base, name, strict)`
    + `base` è¡¨ç¤ºå¯¹è±¡æœ¬èº«
    + `name` è¡¨ç¤ºå±žæ€§
    + `strict` è¡¨ç¤ºæ˜¯å¦ä½¿ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆtrue ä¸º ä¸¥æ ¼æ¨¡å¼ï¼‰
    + ä¾‹å¦‚å¯¹äºŽ `user.hi` åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ºï¼š
      ```javascript
      // å¼•ç”¨ç±»åž‹å€¼
      (user, 'hi', true)
      ```
    + å½“åœ¨ å¼•ç”¨ç±»åž‹ä¸Šè°ƒç”¨åœ†æ‹¬å· `()` æ—¶ï¼Œå®ƒä»¬ä¼šæ”¶åˆ°æœ‰å…³è¯¥å¯¹è±¡åŠå…¶æ–¹æ³•çš„å®Œæ•´ä¿¡æ¯ï¼Œå¹¶ä¸”è®¾ç½®æ­£ç¡®çš„ thisï¼ˆè¿™é‡Œ "this = user")
+ æ€»çš„æ¥è¯´ï¼Œå¦‚æžœå¯¹è±¡çš„æ–¹æ³•ä¸èƒ½è¢«é©¬ä¸Šè°ƒç”¨ï¼Œé‚£ä¹ˆ this å°±ä¼šå¤±åŽ»å¯¹åŽŸå¯¹è±¡çš„å¼•ç”¨


### ç®­å¤´å‡½æ•°æ²¡æœ‰ this
+ ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œå¦‚æžœåœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ this ä½œä¸ºå¼•ç”¨ï¼Œé‚£ä¹ˆ this å°†ä¼šæŒ‡å‘è¯¥ç®­å¤´å‡½æ•°ä»¥å¤–çš„æ­£å¸¸å‡½æ•°è¢«è°ƒç”¨æ—¶çš„å¯¹è±¡ï¼ˆå¦‚æžœæ²¡æœ‰ï¼Œåœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™æ˜¯ window å¯¹è±¡ï¼‰
  ```javascript
  let user = {
    firstName: 'Ilya',
    sayHi() {
      let arrow = () => alert(this.firstName)
      arrow()
    }
  }

  user.sayHi()  // Ilya (this == user)
  ```

#### æœªå®Œå¾…ç»­â€¦â€¦